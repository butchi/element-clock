<!DOCTYPE html>
<!-- 01 secondly_happy12より。時計のテンプレート -->
<html lang="ja">
	<head>
		<meta charset="utf-8">
		<title>元素時計</title>
		<script src="jquery-1.6.4.min.js" type="text/javascript"></script>
<script>
var timerID;
var now;
var hour = -1; // 時
var clockHour; // 表示している時
var minute = -1; // 分
var clockMinute; // 表示している分
//var second = 60; // 秒
var timerInterval = 500;
var halfSecond = 0;

function getNowDate() {
	now = new Date();
	hour = now.getHours(); // 時
	minute = now.getMinutes(); // 分
//	second = now.getSeconds(); // 秒
}

function start() {
	getNowDate();
	updateHour();
	updateMinute();
	timerID = setInterval(update, timerInterval);
}

function update() {
	if(halfSecond == 0) {
		$('#collon').css('visibility','visible');
		//updateSecond();
	} else {
		$('#collon').css('visibility','hidden');

	}
	halfSecond = (halfSecond+1) % 2;
	
	getNowDate();
	if(minute != clockMinute) { // ちょうど0秒になったら
		updateMinute();
		if(hour != clockHour) { // ちょうど0分になったら
			updateHour();
		}
	}
}

function updateHour() {
	clockHour = hour;
	$('#hour').html(hour);
}

function updateMinute() {
	clockMinute = minute;
	$('#minute').html(minute);
}

</script>
	</head>
	<body onLoad="start();">
		<span id="hour"></span>
		<span id="collon">:</span>
		<span id="minute"></span>
	</body>
</html>
